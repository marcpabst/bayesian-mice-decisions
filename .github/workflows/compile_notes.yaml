name: Advanced Usage
on: push
jobs:
  convert_via_pandoc:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2

      - name: create file list
        id: files_list
        run: |
          echo "Lorem ipsum" > lorem_1.md  # create two example files
          echo "dolor sit amet" > lorem_2.md
          mkdir -p output  # create output dir
          # this will also include README.md
          echo "::set-output name=files::$(printf '"%s" ' *.md)"


          
      - name: run loop
        run: for f in ${{ steps.files_list.outputs.files }}; do docker run pandoc/latex pandoc $f --output=output/result.pdf; done

      - name: update file and push to remote    
        run: |
                  echo "Test push commit to the remote in the workflow" >> test.txt

                  git config --global user.name "github-actions[bot]"
                  git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"

                  git add -A
                  git commit -m "Update test.txt"
                  git push